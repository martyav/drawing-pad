{"code":"!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=2)}([function(t,e){t.exports=class{constructor(t,e,n,a,o,i,s,r,p,l,h,d,u,c,m,f,g,w,y,v,b,S){this.canvas=t,this.context=e,this.promptDisplay=n,this.radioButtons=a,this.promptKey=o,this.promptButton=i,this.timer=s,this.hideButton=r,this.countdown=p,this.minutesDiv=l,this.secondsDiv=h,this.stopStartButton=d,this.inputs=u,this.colorLabel=g,this.strokeLabel=w,this.nibMenu=y,this.colorInputValue=c,this.widthInputValueValue=m,this.nibInputValue=f,this.undoButton=v,this.downloadButton=b,this.eraseAllButton=S}}},function(t,e){t.exports=class{constructor(){let t,e,n,a=\"#000000\",o=10,i=\"round\",s=!1,r=0,p=0,l=[],h=!1,d=0,u=\"all\";this.getColor=(()=>a),this.getBackground=(()=>\"white\"),this.getWidth=(()=>o),this.getNib=(()=>i),this.getIsDrawing=(()=>s),this.getPointsToStroke=(()=>l),this.getFirstX=(()=>l[0].x),this.getFirstY=(()=>l[0].y),this.getLastX=(()=>r),this.getLastY=(()=>p),this.getImageData=(()=>t),this.getIsCounting=(()=>h),this.getTime=(()=>d),this.getThrottle=(()=>1e3),this.getTimeLimit=(()=>6e4),this.getInterval=(()=>e),this.getPromptKey=(()=>u),this.getPrompts=(()=>n),this.setColor=function(t){if(\"string\"!=typeof t||\"#\"!==t[0]||7!==t.length||isNaN(parseInt(t.slice(1),16)))throw new TypeError(`Not a valid color hex code: ${t}`);a=t},this.setWidth=function(t){if(\"number\"!=typeof parseInt(t))throw new TypeError(`Not a valid width: ${t}`);if(t<1||t>100)throw new RangeError(`Width is not in range: ${t}`);o=t},this.setNib=function(t){if(\"string\"!=typeof t)throw new TypeError(`Not a valid nib: ${t}`);if(\"square\"!==t&&\"round\"!==t)throw new Error(`Nib must be either square or round: ${t}`);i=t},this.setIsDrawing=function(t){if(\"boolean\"!=typeof t)throw new TypeError(`Not a valid isDrawing value: ${t}`);s=t},this.addPoint=function(t){if(!t.x||!t.y||\"number\"!=typeof t.x||\"number\"!=typeof t.y)throw new TypeError(`Arg lacks valid coordinate values: x ${t.x} y ${t.y}`);l.push({x:t.x,y:t.y})},this.clearPoints=(()=>l.length=0),this.setLastX=function(t){if(\"number\"!=typeof t)throw new TypeError(`Not a number: ${t}`);r=t},this.setLastY=function(t){if(\"number\"!=typeof t)throw new TypeError(`Not a number: ${t}`);p=t},this.setImageData=function(e){if(\"string\"!=typeof e||!e.startsWith(\"data:image/png;base64,\"))throw new TypeError(`Not a valid image data URI: ${e}`);t=e},this.setTime=function(t){if(\"number\"!=typeof t)throw new TypeError(`Not a valid time: ${t}`);if(t<0||t>6e4)throw new RangeError(`Time not in range: ${t}`);d=t},this.resetTime=(()=>d=6e4),this.decrementTime=(()=>d-=1e3),this.setIsCounting=function(t){if(\"boolean\"!=typeof t)throw new TypeError(`Not a valid isDrawingValue: ${t}`);h=t},this.clearInterval=(()=>clearInterval(e)),this.setInterval=function(t){if(\"number\"!=typeof t)throw new TypeError(`Not a valid interval value: ${t}`);if(t<0||t>6e4)throw new RangeError(`Interval is out of range ${t}`);e=t},this.setPromptKey=function(t){if(\"string\"!=typeof t)throw new TypeError(`Not a valid prompt list key: ${t}`);if(\"all\"!==t&&\"fun\"!==t&&\"serious\"!==t)throw new Error(`The only valid prompt list values are fun, serious, or all: ${t}`);u=t},this.setPrompts=function(t){if(!t.fun||!t.serious||!t.all)throw new TypeError(`Prompts must include keys for all, serious, and fun: ${t}`);n=t}}}},function(t,e,n){var a,o,i;let s=n(0),r=n(1),p=n(3);document.addEventListener(\"DOMContentLoaded\",()=>{const t={canvas:document.querySelector(\"#drawHere\"),context:document.querySelector(\"#drawHere\").getContext(\"2d\"),promptDisplay:document.querySelector(\"#promptDisplay\"),radioButtons:document.querySelectorAll('input[type=\"radio\"]'),promptKey:document.querySelector('input[name=\"promptList\"]:checked').value,promptButton:document.querySelector(\"#prompt\"),timer:document.querySelector(\"#timer\"),hideButton:document.querySelector(\".hide\"),countdown:document.querySelector(\".countdown\"),minutesDiv:document.querySelector(\".minutes\"),secondsDiv:document.querySelector(\".seconds\"),stopStartButton:document.querySelector(\".stopStart\"),inputs:Array.from(document.querySelectorAll(\"#controls input\")),colorInputValue:document.querySelector(\"[name=color]\").value,widthInputValue:document.querySelector(\"[name=width]\").value,nibInputValue:document.querySelector(\"[name=nib]\").value,colorLabel:document.querySelector(\"[for=color]\"),strokeLabel:document.querySelector(\"[for=width]\"),nibMenu:document.querySelector(\"[name=nib]\"),undoButton:document.getElementById(\"undo\"),downloadButton:document.getElementById(\"download\"),eraseAllButton:document.getElementById(\"eraseAll\")},e=new r,n=Object.assign(new s,t),a=new p(e,n);a.setCanvasProperties(),a.setLabels(),a.addEventListeners()}),o=[],void 0===(i=\"function\"==typeof(a=function(){return function t(e,n,a){var o,i,s=window,r=\"application/octet-stream\",p=a||r,l=e,h=!n&&!a&&l,d=document.createElement(\"a\"),u=function(t){return String(t)},c=s.Blob||s.MozBlob||s.WebKitBlob||u,m=n||\"download\";if(c=c.call?c.bind(s):Blob,\"true\"===String(this)&&(p=(l=[l,p])[0],l=l[1]),h&&h.length<2048&&(m=h.split(\"/\").pop().split(\"?\")[0],d.href=h,-1!==d.href.indexOf(h))){var f=new XMLHttpRequest;return f.open(\"GET\",h,!0),f.responseType=\"blob\",f.onload=function(e){t(e.target.response,m,r)},setTimeout(function(){f.send()},0),f}if(/^data\\:[\\w+\\-]+\\/[\\w+\\-]+[,;]/.test(l)){if(!(l.length>2096103.424&&c!==u))return navigator.msSaveBlob?navigator.msSaveBlob(g(l),m):w(l);l=g(l),p=l.type||r}function g(t){for(var e=t.split(/[:;,]/),n=e[1],a=\"base64\"==e[2]?atob:decodeURIComponent,o=a(e.pop()),i=o.length,s=0,r=new Uint8Array(i);s<i;++s)r[s]=o.charCodeAt(s);return new c([r],{type:n})}function w(t,e){if(\"download\"in d)return d.href=t,d.setAttribute(\"download\",m),d.className=\"download-js-link\",d.innerHTML=\"downloading...\",d.style.display=\"none\",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent))return t=t.replace(/^data:([\\w\\/\\-\\+]+)/,r),window.open(t)||confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")&&(location.href=t),!0;var n=document.createElement(\"iframe\");document.body.appendChild(n),e||(t=\"data:\"+t.replace(/^data:([\\w\\/\\-\\+]+)/,r)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(o=l instanceof c?l:new c([l],{type:p}),navigator.msSaveBlob)return navigator.msSaveBlob(o,m);if(s.URL)w(s.URL.createObjectURL(o),!0);else{if(\"string\"==typeof o||o.constructor===u)try{return w(\"data:\"+p+\";base64,\"+s.btoa(o))}catch(t){return w(\"data:\"+p+\",\"+encodeURIComponent(o))}(i=new FileReader).onload=function(t){w(this.result)},i.readAsDataURL(o)}return!0}})?a.apply(e,o):a)||(t.exports=i)},function(t,e,n){let a=n(0),o=n(1);t.exports=class{constructor(t,e){if(!(t instanceof o))throw TypeError(\"AppState must be of type StateOrganizer\");if(!(e instanceof a))throw TypeError(\"AppElements must be of type GUIReferences\");this.appState=t,this.appElements=e,this.draw=this.draw.bind(this),this.prompt=this.prompt.bind(this),this.updateCountDown=this.updateCountDown.bind(this),this.stopStart=this.stopStart.bind(this),this.hideTimer=this.hideTimer.bind(this),this.revealTimer=this.revealTimer.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.restore=this.restore.bind(this),this.downloadPic=this.downloadPic.bind(this)}loadJSON(t,e){let n=new XMLHttpRequest;n.overrideMimeType(\"application/json\"),n.open(\"GET\",e,!0),n.onreadystatechange=function(){4==n.readyState&&\"200\"==n.status&&t(n.responseText)},n.send(null)}disable(t){t.hasAttribute(\"disabled\")||(t.disabled=!0)}enable(t){t.hasAttribute(\"disabled\")&&(t.disabled=!1)}draw(t){this.appState.getIsDrawing()&&(this.appState.addPoint({x:this.appState.getLastX(),y:this.appState.getLastY()}),this.appElements.context.beginPath(),this.appElements.context.moveTo(this.appState.getFirstX,this.appState.getFirstY),this.appState.getPointsToStroke().forEach(t=>this.appElements.context.lineTo(t.x,t.y)),this.appElements.context.stroke(),this.appState.setLastX(t.offsetX),this.appState.setLastY(t.offsetY))}prompt(){const t=this.appState.getPromptKey(),e=\"all\"===t?Math.floor(199*Math.random()):Math.floor(99*Math.random());let n;if(this.appState.prompts)n=this.appState.prompts[t][e],this.appElements.promptDisplay.innerHTML=`${n}.`;else{const a=this.appElements.promptDisplay,o=this.appState;let i=function(i){const s=JSON.parse(i);n=\"all\"===t?s.data.fun.concat(...s.data.serious)[e]:s.data[t][e],a.innerHTML=`${n}.`,o.setPrompts({fun:s.data.fun,serious:s.data.serious,all:s.data.fun.concat(...s.data.serious)})};const s=\"https://raw.githubusercontent.com/martyav/drawing-pad/master/src/prompts.json\";this.loadJSON(i,s)}}handleUpdate(t){const e=`${t.target.name}`,n=`${t.target.value}`;switch(e){case\"color\":this.appState.setColor(n),this.appElements.context.strokeStyle=n,this.appElements.colorLabel.innerHTML=`Pen Color: ${n}`;break;case\"width\":this.appState.setWidth(n),this.appElements.context.lineWidth=n,this.appElements.strokeLabel.innerHTML=`Pen Width: ${n}`;break;case\"nib\":this.appState.setNib(n),this.appElements.context.lineCap=n;break;case\"promptList\":this.appState.setPromptKey(n)}}restore(t){let e=new Image;e.src=this.appState.getImageData(),this.store(),e.onload=(()=>{this.eraseAll(),this.appElements.context.drawImage(e,0,0,this.appElements.canvas.width,this.appElements.canvas.height)})}store(){this.appState.setImageData(this.appElements.canvas.toDataURL(\"image/png\"))}downloadPic(){n(4)(this.appState.getImageData(),\"drawing-from-drawing-pad.png\",\"image/png\")}eraseAll(){this.appElements.context.clearRect(0,0,this.appElements.canvas.width,this.appElements.canvas.height),this.appElements.context.fillStyle=this.appState.getBackground(),this.appElements.context.fillRect(5,5,this.appElements.canvas.width-10,this.appElements.canvas.height-10)}hideTimer(){let t;document.querySelector(\".reveal\")?(t=document.querySelector(\".reveal\")).style.opacity=\"1.0\":((t=document.createElement(\"button\")).classList.add(\"reveal\"),t.innerHTML=\"Reveal\",document.body.appendChild(t),t.addEventListener(\"click\",this.revealTimer)),this.appElements.timer.style.transform=`translate(0, -${timer.offsetHeight}px)`,t.style.transform=`translate(0, -${timer.offsetHeight-10}px)`}revealTimer(){const t=document.querySelector(\".reveal\");this.appElements.timer.style.transform=\"translate(0, 0)\",t.style.transform=\"translate(0, -200px)\",t.style.opacity=\"0.0\"}updateCountDown(){const t=this.appState.getTime();t<=0&&(this.appState.clearInterval(),this.appState.isCounting=!1);const e=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60);this.appElements.minutesDiv.innerHTML=e<10?`0${Math.floor(e)}`:Math.floor(e),this.appElements.secondsDiv.innerHTML=n<10?`0${Math.floor(n)}`:Math.floor(n),this.appState.decrementTime()}startTimer(){this.appState.setInterval(window.setInterval(this.updateCountDown,1e3))}stopStart(){this.appState.getIsCounting()?(this.appState.setIsCounting(!1),this.appState.clearInterval(),this.lightDownCountdown()):(this.appState.getTime()<=0&&this.appState.setTime(this.appState.getTimeLimit()),this.appState.setIsCounting(!0),this.startTimer(),this.lightUpCountdown())}lightUpCountdown(){this.appElements.countdown.classList.add(\"lightUp\")}lightDownCountdown(){this.appElements.countdown.classList.remove(\"lightUp\")}setCanvasProperties(){this.appElements.canvas.width=this.appElements.canvas.offsetWidth,this.appElements.canvas.height=this.appElements.canvas.offsetHeight,this.appElements.context.fillStyle=this.appState.getBackground(),this.appElements.context.fillRect(5,5,this.appElements.canvas.width-10,this.appElements.canvas.height-10),this.appElements.context.strokeStyle=this.appState.getColor(),this.appElements.context.lineWidth=this.appState.getWidth(),this.appElements.context.lineCap=this.appState.getNib()}setLabels(){this.appElements.colorLabel.innerHTML=`Pen Color: ${this.appState.getColor()}`,this.appElements.strokeLabel.innerHTML=`Pen Width: ${this.appState.getWidth()}`}addEventListeners(){this.appElements.canvas.addEventListener(\"mousemove\",this.draw),this.appElements.canvas.addEventListener(\"mousedown\",()=>{this.store(),this.enable(this.appElements.downloadButton),this.enable(this.appElements.undoButton),this.appState.setIsDrawing(!0),this.appState.setLastX(event.offsetX),this.appState.setLastY(event.offsetY)}),this.appElements.canvas.addEventListener(\"mouseup\",()=>{this.appState.clearPoints(),this.appState.setIsDrawing(!1)}),this.appElements.canvas.addEventListener(\"mouseout\",()=>{this.appState.clearPoints(),this.appState.setIsDrawing(!1)}),this.appElements.inputs.forEach(t=>t.addEventListener(\"change\",this.handleUpdate)),this.appElements.nibMenu.addEventListener(\"change\",this.handleUpdate),this.appElements.radioButtons.forEach(t=>t.addEventListener(\"change\",this.handleUpdate)),this.appElements.promptButton.addEventListener(\"click\",()=>{this.prompt(),this.appState.getIsCounting()&&this.appState.clearInterval(),this.appState.resetTime(),this.appState.setIsCounting(!0),this.startTimer(),this.lightUpCountdown()}),this.appElements.undoButton.addEventListener(\"click\",()=>{this.restore()}),this.appElements.downloadButton.addEventListener(\"click\",()=>{this.store(),this.downloadPic(),this.enable(this.appElements.downloadButton)}),this.appElements.eraseAllButton.addEventListener(\"click\",()=>{this.store(),this.eraseAll(),this.enable(this.appElements.undoButton)}),this.appElements.hideButton.addEventListener(\"click\",this.hideTimer),this.appElements.stopStartButton.addEventListener(\"click\",this.stopStart)}}},function(t,e,n){var a,o,i;o=[],void 0===(i=\"function\"==typeof(a=function(){return function t(e,n,a){var o,i,s=window,r=\"application/octet-stream\",p=a||r,l=e,h=!n&&!a&&l,d=document.createElement(\"a\"),u=function(t){return String(t)},c=s.Blob||s.MozBlob||s.WebKitBlob||u,m=n||\"download\";if(c=c.call?c.bind(s):Blob,\"true\"===String(this)&&(p=(l=[l,p])[0],l=l[1]),h&&h.length<2048&&(m=h.split(\"/\").pop().split(\"?\")[0],d.href=h,-1!==d.href.indexOf(h))){var f=new XMLHttpRequest;return f.open(\"GET\",h,!0),f.responseType=\"blob\",f.onload=function(e){t(e.target.response,m,r)},setTimeout(function(){f.send()},0),f}if(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&c!==u))return navigator.msSaveBlob?navigator.msSaveBlob(v(l),m):b(l);l=v(l),p=l.type||r}else if(/([\\x80-\\xff])/.test(l)){for(var g=0,w=new Uint8Array(l.length),y=w.length;g<y;++g)w[g]=l.charCodeAt(g);l=new c([w],{type:p})}function v(t){for(var e=t.split(/[:;,]/),n=e[1],a=\"base64\"==e[2]?atob:decodeURIComponent,o=a(e.pop()),i=o.length,s=0,r=new Uint8Array(i);s<i;++s)r[s]=o.charCodeAt(s);return new c([r],{type:n})}function b(t,e){if(\"download\"in d)return d.href=t,d.setAttribute(\"download\",m),d.className=\"download-js-link\",d.innerHTML=\"downloading...\",d.style.display=\"none\",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent))return/^data:/.test(t)&&(t=\"data:\"+t.replace(/^data:([\\w\\/\\-\\+]+)/,r)),window.open(t)||confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")&&(location.href=t),!0;var n=document.createElement(\"iframe\");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t=\"data:\"+t.replace(/^data:([\\w\\/\\-\\+]+)/,r)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(o=l instanceof c?l:new c([l],{type:p}),navigator.msSaveBlob)return navigator.msSaveBlob(o,m);if(s.URL)b(s.URL.createObjectURL(o),!0);else{if(\"string\"==typeof o||o.constructor===u)try{return b(\"data:\"+p+\";base64,\"+s.btoa(o))}catch(t){return b(\"data:\"+p+\",\"+encodeURIComponent(o))}(i=new FileReader).onload=function(t){b(this.result)},i.readAsDataURL(o)}return!0}})?a.apply(e,o):a)||(t.exports=i)}]);","extractedComments":[]}